<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Decentralized Video Conference</title>

  <!-- Favicon -->
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  <!-- Main stylesheet (replace with CSS generated to match Figma) -->
  <link rel="stylesheet" href="./style.css">

  <!-- App scripts (deferred to avoid blocking render) -->
  <script src="./js/socket.io.js" defer></script>
  <script src="./js/main.js" defer></script>
</head>
<body>
  <!-- Main application container -->
  <main class="main-container" role="main" aria-label="Video conferencing application">

    <!-- =========================
         Sidebar: Contacts + Join
         ========================= -->
    <aside class="caller-list-wrapper" role="complementary" aria-label="Contacts and join controls">
      <!-- Title / Logo area - matches Figma top-left "VIDEO CALL" -->
      <header class="sidebar-header" role="banner">
        <h1 class="caller-list-heading">VIDEO CALL</h1>
      </header>

      <!-- Username / Join (keeps functional IDs used by JS: #username, #create-user)
           Note: type="button" prevents accidental form submit (JS should handle creation) -->
      <form id="user-form" class="username-input join-row" action="#" onsubmit="return false;" aria-label="Create or set your display name">
        <label for="username" class="sr-only">Enter your name</label>
        <input id="username" name="username" type="text" placeholder="Enter your name" aria-label="Enter your display name" autocomplete="name" />
        <button id="create-user" type="button" aria-label="Create or set username" title="Create / join">
          <!-- Keep button simple so JS can attach to #create-user; design icon can be styled via CSS -->
           <svg xmlns="http://www.w3.org/2000/svg" 
       width="15" height="22" 
       viewBox="0 0 24 24" 
       fill="none" 
       stroke="white" 
       stroke-width="2" 
       stroke-linecap="round" 
       stroke-linejoin="round">
    <path d="M15 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
    <circle cx="8.5" cy="7" r="4"/>
    <line x1="20" y1="8" x2="20" y2="14"/>
    <line x1="23" y1="11" x2="17" y2="11"/>
  </svg>
        </button>
      </form>

      <!-- Active users heading -->
      <h2 class="active-users-heading" aria-hidden="false">Active Users</h2>

      <!-- Contact list (JS depends on id="allusers") -->
      <nav class="contacts" aria-label="Active users">
        <ul id="allusers" class="caller-list" role="list" aria-live="polite">

          </li>
        </ul>
      </nav>

      <!-- Template for dynamic user items (optional helper for JS). JS can clone this template
           and populate name, id, presence, etc. It does not replace the #allusers id. -->
      <template id="user-template">
        <li class="caller-card" role="listitem">
          <div class="avatar" aria-hidden="true">U</div>
          <div class="meta">
            <div class="name">User Name</div>
            <div class="sub">Online</div>
          </div>
          <button class="call-btn" type="button" aria-label="Call user">
            <img src="/images/phone.png" alt="" width="20" height="20" />
          </button>
        </li>
      </template>
    </aside>

    <!-- =========================
         Video Call Section (main)
         ========================= -->
    <section class="video-call-container" role="region" aria-label="Video call area">
      

      <!-- NOTE: the username input was moved to the sidebar to match the Figma layout.
           All functional IDs remain unchanged for compatibility with existing JS. -->
      <!-- Call status message -->
      

      <!-- Video streams container -->
  <div class="video-streams">
        <div id="call-status" class="hidden"></div>
        <!-- Remote participant (fills full area) -->
    <div class="remote-video">
      <video id="remoteVideo" autoplay playsinline webkit-playsinline></video>
        </div>

        <!-- Local preview (floats bottom-right) -->
    <div class="local-video">
      <video id="localVideo" autoplay muted playsinline webkit-playsinline></video>
        </div>
    </div>

      <!-- =========================
           Controls (bottom center) — preserve IDs used by JS
           ========================= -->
      <div class="btn-group" id="call-controls" role="group" aria-label="Call controls">
  <!-- End / hang-up -->
  <button id="end-call-btn" type="button" class="control-button end" aria-label="End call" title="End call">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none"
         stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.51 19.51 0 0 1-6-6A19.79 19.79 0 0 1 2.08 4.18 2 2 0 0 1 4.06 2h3a2 2 0 0 1 2 1.72c.12.81.37 1.6.72 2.34a2 2 0 0 1-.45 2.18L8.09 9.91a16 16 0 0 0 6 6l1.67-1.24a2 2 0 0 1 2.18-.45c.74.35 1.53.6 2.34.72a2 2 0 0 1 1.72 2z"/>
    </svg>
  </button>

  <!-- Mute / unmute mic -->
  <button id="mute-mic-btn" type="button" class="control-button active"
          aria-pressed="true" aria-label="Mute microphone" title="Mute microphone">
    <svg id="mic-icon" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none"
         stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
      <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
      <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
      <line x1="12" y1="19" x2="12" y2="23"/>
      <line x1="8" y1="23" x2="16" y2="23"/>
    </svg>
  </button>

  <!-- Disable / enable camera -->
  <button id="disable-cam-btn" type="button" class="control-button active"
          aria-pressed="true" aria-label="Turn off camera" title="Turn off camera">
    <svg id="cam-icon" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none"
         stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
      <path d="M23 7l-7 5 7 5V7z"/>
      <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
    </svg>
  </button>
</div>



      <!-- =========================
           Ringing / Incoming call overlay
           ========================= -->
      <!-- Keep the id 'ringing-screen' and child ids used by JS (#caller-name, #accept-call, #reject-call) -->
      <div id="ringing-screen" class="ringing hidden" role="alertdialog" aria-modal="true" aria-hidden="true" aria-labelledby="caller-name">
        <p id="caller-name" class="caller-label" aria-live="polite">Incoming call</p>
        <div class="ringing-actions" role="group" aria-label="Answer or reject call">
          <button id="accept-call" type="button" class="btn accept" aria-label="Accept call">Accept</button>
          <button id="reject-call" type="button" class="btn reject" aria-label="Reject call">Reject</button>
        </div>
      </div>

      <!-- Audio element for ringtone (keep id so JS can control it) -->
      <audio id="ringtone" src="/images/Audio/pink_panther.mp3" loop preload="auto"></audio>

    </section>
    <section>
      <footer class="site-footer">
      <p>© 2025 | Developed by <strong>Bala</strong></p>
      <div class="social-links">
        <a href="https://github.com/" target="_blank" aria-label="GitHub">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" />
        </a>
        <a href="https://www.linkedin.com/in/varadharajan-vijayasimhan/" target="_blank" aria-label="LinkedIn">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg" alt="LinkedIn" />
        </a>
      </div>
    </footer>

  </section>
  </main>

  <!-- Screen-reader only helper (style expected in CSS) -->
  <style>
    /* minimal inline SR-only class so HTML is accessible even if external CSS hasn't loaded yet */
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap;
      border: 0;
    }
  </style>
</body>
</html>
